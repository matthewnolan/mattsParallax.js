/* 
* Matts Parallax for jQuery
* Copyright 2014 Matt Nolan
* matt at redbutton.io
* https://github.com/matthewnolan
*/
 

/*
Call it like this
$(".parallax").mattsParallax(40);

Structure your HTML like this
<section class="parallax">
    <div class="parallaxBk">
        <div class="imgBackground"></div>
    </div>
    <div class="parallaxFront">
        <div class="container">Text in front</div>
    </div>
</section>
*/
window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();(function(e){e.fn.extend({mattsParallax:function(){var t;var n=arguments[0]||40;return this.each(function(){function u(e){if(!o){o=true;requestAnimFrame(a)}}function a(){var e=i.height();var u=s.scrollTop();var a=r.offset().top;var f=r.height();t=u+e;distanceFromTop=a-u+f;percentFromTop=distanceFromTop/(e+f)*100;percentFromTopScaled=(percentFromTop*(n/100)).toFixed(3);bloatedHeight=Math.round(100/(1-n/100));if(t>a&&distanceFromTop>0){r.find(".imgBackground").attr("style","height: "+bloatedHeight+"%; transform:translateY("+percentFromTopScaled+"%); -webkit-transform:translateY("+percentFromTopScaled+"%); -moz-transform:translateY("+percentFromTopScaled+"%);")}o=false}var r=e(this);var i=e(window);var s=e(document);var o=false;u();e(document).scroll(function(e){u(e)});e(document).resize(function(e){u(e)});})}})})(jQuery)